function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,a={},r={},s=t.parcelRequire49e2;function n(e,t,a,r,s,n){let c="";c=u(s)&&o(s.id)?`#${s.id}`:h(r)?`${e}.${r.join(".")}`:o(r)?`${e}.${r}`:e;let p=a.querySelector(c);if(u(p,0)){if("ul"==e||"ol"==e)for(let e of(p.innerHTML="",t)){let t=document.createElement("li");l(t,e,n),p.appendChild(t)}else l(p,t,n)}else p=i(e,t,a,r,s,n);return p}function i(e,t,a=null,r="",s=null,n=!1){var i;let c=document.createElement(e);if(e=e.toLowerCase(),u(s,1))for(let e in s)c.setAttribute(e,s[e]);if(null!=(i=c)&&r.length>0&&(Array.isArray(r)?i.classList.add(...r):o(r)&&i.classList.add(r)),h(t)){if("ul"==e||"ol"==e)for(let e of t){let t=document.createElement("li");l(t,e,n),c.appendChild(t)}else if("select"==e)for(let e of t){let[t,a,r]=e.split("|"),s=document.createElement("option");if(l(s,a??t,n),s.value=t,void 0!==r){let e=c.querySelector(`optgroup[label="${r}"]`);null==e&&((e=document.createElement("optgroup")).label=r,c.appendChild(e)),e.appendChild(s)}else c.appendChild(s)}else l(c,t[0],n)}else if(o(t,1)){if("img"==e)c.alt=t;else if("input"==e&&t.length>0){let e=c,a=document.createElement("label");(c=document.createElement("div")).id=`${e.id}-wrapper`,r.length>0&&c.classList.add((Array.isArray(r)?r[0]:r)+"-wrapper"),a.setAttribute("for",e.id),l(a,t,n),"radio"==e.getAttribute("type")||"checkbox"==e.getAttribute("type")?(a.classList.add("input-box-label"),c.append(e,a)):c.append(a,e)}else l(c,t,n)}return null!=a&&a.appendChild(c),c}function l(e,t,a){a?e.innerHTML=t:e.innerText=t}function o(e,t=1){return null!=e&&void 0!==e.length&&e.length>=t}function h(e,t=1){return null!=e&&Array.isArray(e)&&void 0!==e.length&&e.length>=t}function u(e,t=1){return null!=e&&"object"==typeof e&&Object.keys(e).length>=t}null==s&&((s=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return a[e]=s,t.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},t.parcelRequire49e2=s),(0,s.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>a,set:e=>a=e,enumerable:!0,configurable:!0});var a,r=new Map;a=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),s("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["b9Fgu","index.d2df16bf.js","2rjaX","rogue.9418359a.png","bWLzp","Stab.df3f343b.png","k1COE","backstab.cbfe68df.png","lP0AT","evasion.10f00589.png","s8ijN","potion.9e92e676.png","8Fkm7","warrior.80ba110f.png","e8hyb","Slash.0d282c12.png","jHR1N","Bash.1a78b3f2.png","1QK31","Bonk.72d83ecb.png","4HaMh","smash.8dd9de83.png","7godC","mage.13131773.png","iGLqe","Rayoffrost.e225c5f0.png","fbNVe","Ig-miss.52bd7018.png","4TmEY","lightning.10a957d3.png","40ao2","heal.e56e2835.png","bTxU9","archerright.43c66f17.png","cEJ60","archerleft.431eb79a.png"]'));class c{static statusEffects=["none","heal","cure","evade","burn","stun","riposte"];#e;#t;#a;#r;#s;#n=10;#i;#l;#o="none";#h=0;constructor(e,t,a,r=10,s=-1,n="enemy",i="none",l="skill.png",o=""){this.#e=e,this.#t=t,this.#a=a,this.#i=l,this.#l=o;let[h,u]=i.split("|");c.statusEffects.includes(h)&&(this.#o=h,this.#h=u??0),r>=0&&r<=20&&(this.#n=r),this.#r=-1===s?-1:Math.max(1,Math.min(s,10)),this.#s="self"!==n?"enemy":"self"}get minDamage(){return this.#t}get maxDamage(){return this.#a}get name(){return this.#e}get target(){return this.#s}get uses(){return this.#r}get status(){return this.#o}get statusDuration(){return this.#h}get hitChance(){return this.#n}get icon(){return this.#i}get description(){return this.#l}use(e,t){if(-1!=this.#r&&this.#r<=0)throw Error(`You cannot use ${this.#e} any more times during this match.`);let a=Math.round((this.#a-this.#t)*Math.random())+this.#t;if(-1!=this.#r&&this.#r--,"self"==this.target)("heal"==this.status||"cure"==this.status)&&(t.heal(a),O.showMessage(`${t.name} healed themselves for ${a} health.`)),"cure"==this.status&&t.removeStatusEffect("burn")&&O.showMessage(`${t.name} cured themselves of burning.`),"none"!=this.status&&this.statusDuration>0&&t.addStatusEffect(this.status,this.statusDuration);else{let r=this.#u(20,this.hitChance),s=this.#u(20,e.armor);r>=s?(e.takeDamage(a),O.showMessage(`${t.name} attacked ${e.name} with ${this.name} for ${a} damage. (${r} vs. ${s})`),"riposte"==this.status&&this.statusDuration>0?t.addStatusEffect(this.status,this.statusDuration):"none"!=this.status&&this.statusDuration>0&&e.addStatusEffect(this.status,this.statusDuration),e.hasStatusEffect("riposte")&&(t.takeDamage(15),O.showMessage(`${e.name} riposted ${t.name}'s attack dealing 15 damage in return.`))):(O.showMessage(`${t.name} attacked ${e.name} with ${this.name} but missed! (${r} vs. ${s})`),a=null)}return a}#u(e,t){return Math.ceil(Math.random()*e)+t}}class p{#c;#p=800;#d=10;#f=[];#m;#g;constructor(e,t,a,r,s){this.name=e,this.#p=t,this.#d=a,this.#m=r,this.#g=s}set name(e){if("string"!=typeof e||e.length<2||e.length>20)throw Error("The name of a fighter type must be a string between 2 and 20 characters in length.");this.#c=e}get name(){return this.#c}get armor(){return this.#d}get maxHealth(){return this.#p}get icon(){return this.#g}get style(){return this.#m}addSkill(e){if("object"!=typeof e||!(e instanceof c))throw Error(`Error attempting to add invalid skill to ${this.#c}!`);this.#f.includes(e)||this.#f.push(e)}getAttackSkill(e){for(let t of this.#f)if(t.name==e)return t;throw Error(`The ${this.#c} does not know the ${e} skill.`)}getAvailableSkills(){if(this.#f.length<=0)throw Error(`The ${this.#c} does not have any skills assigned!`);return this.#f.filter(({uses:e})=>e>0||-1===e)}}class d{#y;#w;#k;constructor(e,t,a){this.#w=t,this.#y=e,this.#k=a,this.#b()}get duration(){return this.#w}get effectType(){return this.#y}get effectName(){return d.getEffectName(this.effectType)}static getEffectName(e){switch(e){case"heal":return"Health regen";case"cure":return"Healing";case"evade":return"Evading";case"burn":return"Burning";case"stun":return"Stunned";case"riposte":return"Riposting"}}turnProc(){if(this.#w>0)switch(this.#w--,this.effectType){case"burn":this.#k.takeDamage(10),O.showMessage(`${this.#k.name} takes 10 damage from burning.`);break;case"heal":this.#k.heal(10),O.showMessage(`${this.#k.name} regenerates 10 health.`)}}#b(){switch(this.effectType){case"heal":O.showMessage(`${this.#k.name} is regenerating health for ${this.#w} rounds!`);break;case"evade":O.showMessage(`${this.#k.name} is evading attacks (+5 defense) for ${this.#w} rounds!`);break;case"burn":O.showMessage(`${this.#k.name} is burning for ${this.#w} rounds!`);break;case"stun":O.showMessage(`${this.#k.name} is stunned for ${this.#w} rounds!`);break;case"riposte":O.showMessage(`${this.#k.name} is riposting attacks for ${this.#w} rounds!`)}}expireMessage(){switch(this.effectType){case"heal":O.showMessage(`${this.#k.name} stopped regenerating health.`);break;case"evade":O.showMessage(`${this.#k.name} stopped evading attacks.`);break;case"burn":O.showMessage(`${this.#k.name} is no longer burning.`);break;case"stun":O.showMessage(`${this.#k.name} recovered from stun.`);break;case"riposte":O.showMessage(`${this.#k.name} stopped riposting attacks.`)}}}class f{#E;#v;#S;#H;#$;#R;constructor(e,t){if("object"!=typeof t||!(t instanceof p))throw Error("Invalid fighter type specified!");this.name=e,this.#H=t,this.#S=this.#H.maxHealth,this.#$=[],this.#R=0}get id(){return this.#E}set id(e){if(1==e||2==e)this.#E=e;else throw Error("The player ID must be either 1 or 2.")}get name(){return this.#v}set name(e){if("string"!=typeof e||e.length<2||e.length>20)throw Error("The player name must be a string between 2 and 20 characters in length.");this.#v=e}get health(){return this.#S}get maxHealth(){return this.#H.maxHealth}get type(){return this.#H}get armor(){return this.type.armor+(this.hasStatusEffect("evade")?15:0)}get round(){return this.#R}incrementRound(){this.#R++}takeDamage(e){return"string"==typeof e&&(e=parseInt(e)),e>0&&(e=Math.min(e,this.#S),this.#S-=e),e}heal(e){return"string"==typeof e&&(e=parseInt(e)),e>0&&(e=this.#S+e>this.type.maxHealth?this.type.maxHealth-this.#S:e,this.#S+=e),e}addStatusEffect(e,t){c.statusEffects.includes(e)&&t>0&&this.#$.push(new d(e,t,this))}removeStatusEffect(e){let t=0;if(c.statusEffects.includes(e)){let a=[];for(let r of this.#$)r.effectType!=e?a.push(r):(t++,r.expireMessage());this.#$=a}return t}hasStatusEffect(e){for(let t of this.#$)if(t.effectType==e)return!0;return!1}getStatusEffects(){let e=[];for(let t of this.#$)e.push(`<span class="status-${t.effectType}">${t.effectName} [${parseInt(t.duration)}]</span>`);return e}updateStatusEffects(){let e=[];for(let t=0;t<this.#$.length;t++){let a=this.#$[t];a.turnProc(),a.duration>0?e.push(a):a.expireMessage()}this.#$=e}useSkill(e,t){let a=this.type.getAttackSkill(e);if(null==a)throw Error(`The skill ${e} is not known to a ${this.type}!`);return{roll:a.use(t,this),skill:a}}}class m{#T=0;#_;#A;#M;constructor(e,t){if(!(e instanceof f)||!(t instanceof f))throw Error("Invalid player encountered, unable to start match.");this.#A=e,this.#M=t,this.#A.id=1,this.#M.id=2,O.setPlayerColor(1,this.#A.type.style),O.setPlayerColor(2,this.#M.type.style)}get player(){return this.#_}get opponent(){return this.#_===this.#A?this.#M:this.#A}nextPlayerTurn(){if(!this.checkForGameOver()){if(this.#A.round===this.#M.round&&this.#T++,this.#_=this.opponent,this.#_.incrementRound(),this.#_.hasStatusEffect("stun")){O.showMessage(`<strong>Round ${this.#T}:</strong> ${this.#_.name} is stunned, skipping turn!`),this.#_.updateStatusEffects(),this.nextPlayerTurn();return}O.showMessage(`<strong>Round ${this.#T}:</strong> ${this.#_.name}'s turn!`),O.setCurrentPlayer(this.#_.id),this.#_.updateStatusEffects(),this.#L(this.#A),this.#L(this.#M),this.checkForGameOver()}}checkForGameOver(){return this.#A.health<=0?(this.#F(this.#M,this.#A),!0):this.#M.health<=0&&(this.#F(this.#A,this.#M),!0)}#F(e,t){this.#T=0,this.#_=null,O.showMessage(`<strong>GAME OVER:</strong> ${t.name} is knocked out, ${e.name} wins!`),O.showGameOverScreen(e.name)}#L(e){let t=O.getPlayerElement(e.id);n("div",e.name,t,"player-name",{id:`player-${e.id}-name`}),n("div",`<span>Class:</span> ${e.type.name}`,t,"player-class",{id:`player-${e.id}-class`},!0),n("div",`<span>Health:</span> ${e.health} / ${e.maxHealth}`,t,"player-health",{id:`player-${e.id}-health`},!0),n("div",`<span>Defense:</span> ${e.armor}`,t,"player-defense",{id:`player-${e.id}-defense`},!0),n("ul",e.getStatusEffects(),t,"player-effects",{id:`player-${e.id}-effects`},!0),n("img","Player avatar",t,"avatar-icon",{src:`${e.type.icon}`}),this.#x(e)}#x(e){let t;let a=e.type.getAvailableSkills(),r=O.getPlayerElement(e.id),s=r.querySelector(".skill-buttons");for(let n of(null==s?(s=i("form","",r,"skill-buttons",{id:`player-${e.id}-skills`}),t=i("fieldset","",s,"skill-button-wrapper"),s.addEventListener("submit",e=>{e.preventDefault();let t=e.submitter.getAttribute("skillname"),a=this.player.useSkill(t,this.opponent);O.showPlayerMove(this.player,this.opponent,t,a)})):t=s.querySelector(".skill-button-wrapper"),t.innerHTML="",t.disabled=e!=this.#_,a)){let a="player-"+e.id+"-"+n.name.toLowerCase().replaceAll(" ","-");i("button",`<img src="${n.icon}">`+(-1===n.uses?n.name:`${n.name} (${n.uses})`),t,"player-skill",{id:a,skillname:n.name},!0),i("div",n.description,t,"player-skill-tooltip")}}}var g={};g=new URL("rogue.9418359a.png",import.meta.url).toString();var y={};y=new URL("Stab.df3f343b.png",import.meta.url).toString();var w={};w=new URL("backstab.cbfe68df.png",import.meta.url).toString();var k={};k=new URL("evasion.10f00589.png",import.meta.url).toString();var b={};b=new URL("potion.9e92e676.png",import.meta.url).toString();class E extends p{constructor(){super("Rogue",300,4,"fighterclass-rogue",e(g)),this.addSkill(new c("Stab",5,15,15,-1,"enemy","none",e(y),"Stab opponent for 5-15 damage. (+15 attack)")),this.addSkill(new c("Backstab",40,70,10,5,"enemy","riposte|1",e(w),"Backstab opponent for 30-60 damage and riposte incoming attacks for 1 turn, retaliating for 15 damage. (+10 attack)")),this.addSkill(new c("Evasion",0,0,0,3,"self","evade|3",e(k),"Evade attacks for three rounds (+15 defense).")),this.addSkill(new c("Potion",30,35,10,3,"self","heal|2",e(b),"Heal yourself for 30-35 health and regen 10 health for 2 rounds."))}}var v={};v=new URL("warrior.80ba110f.png",import.meta.url).toString();var S={};S=new URL("Slash.0d282c12.png",import.meta.url).toString();var H={};H=new URL("Bash.1a78b3f2.png",import.meta.url).toString();var $={};$=new URL("Bonk.72d83ecb.png",import.meta.url).toString();var R={};R=new URL("smash.8dd9de83.png",import.meta.url).toString();class T extends p{constructor(){super("Warrior",400,5,"fighterclass-warrior",e(v)),this.addSkill(new c("Slash",10,15,15,-1,"enemy","none",e(S),"Slash opponent for 10-15 damage. (+15 attack)")),this.addSkill(new c("Bash",5,40,10,-1,"enemy","none",e(H),"Bash opponent for 5-40 damage. (+10 attack)")),this.addSkill(new c("Bonk!",15,20,10,3,"enemy","stun|1",e($),"Bonk opponent on the head for 15-20 damage, stunning them for 1 round. (+10 attack)")),this.addSkill(new c("Flame blade",50,50,5,3,"enemy","burn|2",e(R),"Hit opponent with a flaming blade for 50 damage and inflict burn for 2 rounds. (+5 attack)"))}}var _={};_=new URL("mage.13131773.png",import.meta.url).toString();var A={};A=new URL("Rayoffrost.e225c5f0.png",import.meta.url).toString();var M={};M=new URL("Ig-miss.52bd7018.png",import.meta.url).toString();var L={};L=new URL("lightning.10a957d3.png",import.meta.url).toString();var F={};F=new URL("heal.e56e2835.png",import.meta.url).toString();class x extends p{constructor(){super("Wizard",200,3,"fighterclass-mage",e(_)),this.addSkill(new c("Ray of Frost",10,15,15,-1,"enemy","none",e(A),"Freeze opponent with a ray of frost doing 10-15 damage. (+15 attack)")),this.addSkill(new c("Ig-miss",35,40,10,6,"enemy","burn|3",e(M),"Attempt to scorch opponent for 35-40 damage with a firebolt, burning for 10 damage over 3 rounds. (+5 attack)")),this.addSkill(new c("Lightning",50,60,10,3,"enemy","stun|1",e(L),"Electrocute opponent with a lightning bolt for 50-60 damage, stunning for 1 round. (+10 attack)")),this.addSkill(new c("Heal",50,50,10,3,"self","cure",e(F),"Heal yourself for 50 health and cure burning."))}}var D={};D=new URL("archerright.43c66f17.png",import.meta.url).toString();var P={};P=new URL("archerleft.431eb79a.png",import.meta.url).toString();var O=new class{#D;#P;#O;#U;#C;#A;#M;#N;constructor(e){this.#P=e}startGame(e,t){this.#P.innerHTML="",this.#C=i("div","",this.#P,"game-players",{id:"players"}),this.#U=i("div","",this.#P,"game-errors",{id:"errors"}),this.#O=i("div","",this.#P,"game-messages",{id:"messages"}),this.#A=i("div","",this.#C,"game-player",{id:"player-1"}),this.#N=i("div","",this.#C,"game-player-indicator",{id:"player-indicator"}),this.#M=i("div","",this.#C,"game-player",{id:"player-2"}),this.#D=new m(new f(e.name,this.#I(e.type)),new f(t.name,this.#I(t.type))),this.#D.nextPlayerTurn()}#I(e){switch(e){case"warrior":return new T;case"rogue":return new E;case"mage":return new x}}setCurrentPlayer(t){this.#N.innerHTML=" ",1==t?(i("img","Arrow",this.#N,"player-indicator-archer",{src:e(D)}),this.#A.classList.add("activeplayer"),this.#M.classList.remove("activeplayer")):(i("img","Arrow",this.#N,"player-indicator-archer",{src:e(P)}),this.#A.classList.remove("activeplayer"),this.#M.classList.add("activeplayer"))}setPlayerColor(e,t){1==e?this.#A.classList.add(t):this.#M.classList.add(t)}getPlayerElement(e){return this.#C.querySelector(`#player-${e}`)}showMessage(e){this.#O.prepend(i("div",e,null,"game-message",null,!0))}showError(e){let t=i("div",e,null,"game-error",null,!0);this.#U.prepend(t),this.#U.classList.add("show"),setTimeout(()=>{t.remove(),this.#U.children.length<=0&&this.#U.classList.remove("show")},1e4)}showPlayerMove(e,t,a,r){document.querySelectorAll(".skill-button-wrapper").forEach(e=>{e.disabled=!0}),i("img",a,this.#N,"feedback-skillIcon",{src:r.skill.icon}),0!==r.roll&&i("p",`${null!==r.roll?r.roll:"Miss!"}`,this.#N,"self"==r.skill.target?"feedback-healing":"feedback-damage"),null!==r.roll&&"none"!==r.skill.status&&i("div",d.getEffectName(r.skill.status),this.#N,["feedback-statuseffect",`status-${r.skill.status}`]),setTimeout(()=>{this.#D.nextPlayerTurn()},2e3)}showGameOverScreen(e){let t=i("dialog","",document.body,"game-over",{id:"gameover"});i("h2","Game Over!",t,"game-over-title",{id:"gameover-title"}),i("div",`${e} is victorious!`,t,"game-over-text",{id:"gameover-text"}),i("button","Play again!",t,"game-over-button",{id:"restart-button"}).addEventListener("click",e=>{t.close(),t.remove(),this.newGame()}),i("button","OK",t,"game-over-button",{id:"gameover-button"}).addEventListener("click",e=>{t.close(),t.remove()}),t.showModal()}newGame(){this.#P.innerHTML="";let e=i("form","",this.#P,"new-players-form",{id:"new-players-form"}),t=i("div","",e,"new-players-wrapper",{id:"new-players-wrapper"}),a=i("div","",e,"start-game-button-wrapper");i("button","Start game!",a,"start-game-button",{id:"start-game-button"}),this.#q(t,"one"),this.#q(t,"two"),e.addEventListener("submit",this.#G.bind(this))}#q(t,a){let r=i("div","",t,"new-player-box",{id:"new-player-"+a});return i("h2","Player "+("one"==a?"1":"2"),r,"new-player-title"),i("input","Choose your name:",r,"new-player-name",{id:`new-player-${a}-name`,type:"text",minlength:"2",maxlength:"20",required:"true"}),i("label","Choose your class:",r,"new-player-label",{for:`new-player-${a}-class`}),i("input",`<img src="${e(v)}" alt="Warrior"> <span>Warrior</span>`,r,"new-player-class",{id:`new-player-${a}-class-warrior`,type:"radio",name:`new-player-${a}-class`,value:"warrior",checked:"true"},!0),i("input",`<img src="${e(g)}" alt="Rogue"> <span>Rogue</span>`,r,"new-player-class",{id:`new-player-${a}-class-rogue`,type:"radio",name:`new-player-${a}-class`,value:"rogue"},!0),i("input",`<img src="${e(_)}" alt="Wizard"> <span>Wizard</span>`,r,"new-player-class",{id:`new-player-${a}-class-mage`,type:"radio",name:`new-player-${a}-class`,value:"mage"},!0),r}#G(e){e.preventDefault();let t={name:document.querySelector("#new-player-one-name").value.trim(),type:document.querySelector('input[name="new-player-one-class"]:checked').value},a={name:document.querySelector("#new-player-two-name").value.trim(),type:document.querySelector('input[name="new-player-two-class"]:checked').value};this.startGame(t,a)}}(document.querySelector("#game"));try{O.newGame()}catch(e){console.error(e),O.showError(e)}
//# sourceMappingURL=index.d2df16bf.js.map
